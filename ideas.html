<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.54">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Galen Seilis">

<title>Blog Ideas – Galen Seilis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Galen Seilis</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">Galen Seilis</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./presentations.html"> 
<span class="menu-text">Presentations</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./publications.html"> 
<span class="menu-text">Publications</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/galenseilis"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/GSeilis"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Blog Ideas</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Galen Seilis </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<p>Some ideas for blog posts:</p>
<hr>
<p>How to choose software tools with respect to development effort and the Turing tar pit.</p>
<hr>
<p>Asychronous programming is not required for DES, but is it better?</p>
<hr>
<p>All data is spatiotemporal data, and we often neglect that fact. It has never been so easy to collect the time and location of measurements. Some measurements are paired to sets of time and space rather than individual points.</p>
<hr>
<p>BCData –&gt; Get some geospatial data –&gt; Load data using Geopandas –&gt; Plot using Folium.</p>
<hr>
<p>Ibis integration with Kedro example.</p>
<hr>
<p>UML used to be considered a tool for designing programs. That purpose has been mostly abandoned in modern software development. The primary use case for UML IMO is to go the other way; generate UML from code. ‘Sometimes’ a UML diagram can provide a useful bird’s eye pictureo of the structure of a program, which can help a programmer unfamiliar with some code get up and running.</p>
<hr>
<p>Go over the common software design patterns, showing code examples of each one.</p>
<ul>
<li>https://en.wikipedia.org/wiki/Software_design_pattern</li>
<li>https://en.wikipedia.org/wiki/Design_Patterns</li>
</ul>
<hr>
<p>Adversarial learning of simple probability distribution parameters. Could make for a good explainer of aversarial learning. Not sure if it is really better than other parametrization approaches though, but it is at least generative by construction.</p>
<hr>
<p>Discuss the time-to-event vs time sweeping in simulation. The former tends to produce faster programs when the event density is relatively low. The latter tends to be faster when high event density (in time) is high and local state updates can be parallelized.</p>
<hr>
<p>Asyncio example of file IO.</p>
<hr>
<p>Chaos isn’t just about high sensitivty to initial conditions. It is also about topological transitivity and density of orbits. IMO, the topological transitivity might be the most important property. Topological mixing is a special case of topological transitivity which may be easier to explain.</p>
<hr>
<p>Quadrant rule in BC silviculture assumes a type of spatial homogeneity within a plot. Even if a plot is ostensibly a “cedar carpet”, the density may not be truly uniform. A broader set of principles based on partitioning the plot and using symmetries generalizes the quadrant rule.</p>
<hr>
<p>There is/was a fixed percentage agreement required between a silviculture surveyor and an auditor. I recall a professional forester assuring me that this ensures a reasonable expectation of agreement bewteen surveyor and auditor because the percentages “scale up”. They could be right, but I’m skeptical about this.</p>
<p>As the number of trees increases we should expect the variance of the counts to increase until even highly-skilled professionals will tend not to agree with each other within that fixed percentage agreement. Under an assumption of statistical independence we can easily show that this is true. Whether such a number of trees is counted in practice is not known to me, and mathematically it depends on the parameters.</p>
<hr>
<p>What distribution do the counts within a silviculture plot follow?</p>
<p>I expect that the number of natural regen trees within an untreated area (i.e.&nbsp;not planted) follows an inhomogenous Poisson point process for the number of trees. Recently-planted trees should follow a probability distribution that is close to uniform (but not exactly uniform because it is more like a grid).</p>
<p>Regardless of the number of trees, the number of trees that a suveyor counts will count has both false positives and false negatives. A first approximation could be a binomial distribution with some probability of sucessfully counting each tree. But not all trees are equally easy to spot, motivating us towards something like a Poisson binomial distribution. This approach may be more realistic, but if we can get away with a binomial likelihood with a Beta distributed prior on the probability of detection that might be more feasible. Maybe we could even show that some operation like marginalization gives us the binomial distribution from the Poisson binomial.</p>
<p>Once we have chosen a suitable mathematical model, we could show</p>
<hr>
<p>Marginal distributions are underrated, but despite their simplicity they get a bad rep. People often feel the need to stratify their variables, thereby conditioning the distribution they’ve interested in. This creates higher variance estimates and does not take any advantage of pooling. Partial pooling is a great way to go, but I think there are sometimes simpler analyses based on the marginal distributions that answer the same questions. Complete pooling is sometimes an appropriate modelling choice.</p>
<hr>
<p>Explore a sequence of location-composed exponential distributions. Although each step is memoryless, the overall stochastic process is not.</p>
<hr>
<p>Explore Kedro integration with Quarto.</p>
<hr>
<p>Asynchrony vs concurrency in programming.</p>
<hr>
<p>Implement metropolis hasting algorithm from scratch in Rust/Python.</p>
<hr>
<p>The fastest discrete event simulation are not those which are developed within a framework that provides a huge number of features, or provide abstractions to generalize across huge spans of use cases. Rather, it will be the implementations that take the greatest advantage of speciality rather than generality. To know what you can assume and lean into that will produce a faster simulation product. This is one argument in favour of bespoke simulations over framework tools or enterprise development software.</p>
<ul>
<li>Give an example of a FIFO M/M/1 queue implementation using a framework tool (e.g.&nbsp;Ciw) vs a minimumal implementation in Python.</li>
<li>Also show an implementation in Rust to further emphasize the point that being able to assume data types is an example of the overall notion that specialty can provide better performance.</li>
</ul>
<p>There are, of course, downsides to specialized softare. They can sometimes be less configurable out of the box. If what you need for a given project actually is a large multifeatured tool, then writing it yourself might only provide minor benefits.</p>
<p>I think that when you really have no idea what you need, which often happens when you’re building a product the first time, going for a framework tool that is highly generalized and flexible makes sense for obtaining and MVP. But you’re product will plausibly be slower, and possibly more complicated under the hood than needed.</p>
<p>If the required feature set stabilizes, then it may be time to look at writing something that is specialized to solve the problem <strong>well</strong> rather than solve it generically.</p>
<hr>
<p>Overview of important Git features.</p>
<hr>
<p>Causal structure of discrete event simulation from a Pearlian causal inference point of view.</p>
<hr>
<p>Create an example hybrid DES system when parts of the smooth state inform the discrete system and <em>vice versa</em>.</p>
<hr>
<p>Kedro catalog can contain “metadata” which can be used to put any information you want into it. It is intended by the Kedro devs for plugins, but you can really put any info you want there. This includes things like annotations of variables, which can be programmatically loaded later to provide glossaries of terms and similar things.</p>
<hr>
<p>Provide an example statistical model of service completion rate where the number of servers is an integer and the completion rates are statistically dependent. The purpose of this exercise is to provide a statistical model that allows servers to be cooperative or competitive in service completion rates, which “competition” could just mean negatively related rates, without modelling individual servers as data structures in a simulation.</p>
<p>A first approximation could look like this. Suppose a total service comletion rate <span class="math inline">\(\mu\)</span>, which can be decomposed into the rates for each server:</p>
<p><span class="math display">\[\mu := \sum_i \mu_i\]</span></p>
<p>where <span class="math inline">\(\mu_i\)</span> is an individual server’s service completion rate. However, this misses having some form of statistical dependence. To get that we can assume a multivariate log-normal distribution over the individual server’s rates.</p>
<hr>
<p>Numba doc examples vs Rust.</p>
<hr>
<p>CuPy examples vs Rust.</p>
<hr>
<p>Bayesian graphlets analysis.</p>
<hr>
<p>Writing software to be highly general is an approach to managing uncertainty about the future use cases. It lowers the risk of later finding that you need to extend the software, and optimistically hopes that it lowersthe risk of later finding that you need to extend the software when that is difficult.</p>
<p>In a sense the number of features that are implemented prospectively without a planned usage is a measure of how little the developers actually know about the software they need to build. Sometimes</p>
<p>One of the alternatives to writing highly generalized code is to write code to be extensible rather than general.</p>
<p>The primary downside of aiming for generality is the up-front development effort. You can go to great lengths to create a majestic cathedral when all you needed was a tent.</p>
<p>A secondary downside is the performance of the software itself. While I would not take it as an absolute rule, the tendency I have observed is that highly generalized software (e.g.&nbsp;bloated with features) is slower than specialized software.</p>
<hr>
<p>Give an example of using Ziggy PyDust.</p>
<ul>
<li>https://github.com/spiraldb/ziggy-pydust</li>
</ul>
<hr>
<p>Implement reservoir sampling based on algorithms on Wiki: https://en.wikipedia.org/wiki/Reservoir_sampling</p>
<hr>
<p>Compare SciPy and PyMC.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th>SciPy</th>
<th>PyMC</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>maximum likelihood estimation</td>
<td>full posterior and posterior predictive sampling</td>
</tr>
<tr class="even">
<td>mostly designed for simple distribution</td>
<td>designed for custom distributions</td>
</tr>
</tbody>
</table>
<p>While SciPy does support some multivariate sampling tools, such as the mutlvariate normal distribution, it isn’t out-of-the-box well-suited to the typical multivariate distributions we can expect from real data. Often the strategy I have seen taken with SciPy is to stratify the data in such a way that each grouping in the data follows a nice family of distribution. That approach introduces a tradeoff of not pooling shared information about the statistical populations.</p>
<p>PyMC’s largest downside on a given problem for which SciPy could also be used is that it is a more complicated process. SciPy provides relatively quick fitting and sampling.</p>
<p>SciPy is not well-suited to custom probability distributions. Its underlying fitting methods using inverse transform sampling which only works when the CDF is invertible. Furthermore, it will attempt to use the CDF in an optimization problem to find inverses numerically. That’s smart from a math point of view, but it is computationally inefficient in practice.</p>
<p>PyMC is a relatively easy win for mixed models. If you have various grouping in the data and you think each population is from the same family of distribution, differing only in the parametres, then PyMC’s <code>coordinates</code> makes that easy. More complicated structures are also possible.</p>
<p>I tried to develop some more complicated models using SciPy’s distributions combined with its optimization library. I found that mixtures of gamma distributions are particularly tricky, and it wasn’t uncommon for the modelling approach to be revised multiple times.</p>
<p>PyMC models can sometimes sample poorly, and there is likewise a whole bag of tricks to refine the model or sampling or data to improve its performance. However, I noticed that it does mixtures quite well whereas I have had “mixed results” (pun intended) with SciPy.</p>
<p>SciPy being based on a maximum likelihood estimation (MLE) approach means that it assumes that the data was sampled from the likelihood distribution. In this approach the family of distributions is assumed and we take the view that it is just a matter of finding the specific parameters.</p>
<p>PyMC being primarly based on full posterior inference means something very different. The data does not need to be seen as a sample from the likelihood at all! The posterior is defined via Baye’s theorem to be proportional to the product of the likelihood of the data and the prior. That is, the likelihood refines the prior using the data.</p>
<hr>
<p>Implement the various statistical and DES models you have seen in healthcare.</p>
<hr>
<p>Prepare some posts on uncertainty quantification.</p>
<hr>
<p>Model a stochastic matrix by having each row be a multinomial logistic regression.</p>
<hr>
<p>Model a stochastic matrix by having each row follow a Dirichlet distribution.</p>
<hr>
<p>Explain what a compact topological space is, and why it matters as a modelling assumption.</p>
<hr>
<p>Python exceptions should be preferentially used for exceptional behavior.</p>
<hr>
<p>Provide an example of using Nelsie.</p>
<hr>
<p>Explain how I think about outliers and anomalies.</p>
<p>Essentially two types: - Rare events - Very different events - “One of these things is not like the other” game. - This might eventually be the same as the rare events when taken under the certain light.</p>
<hr>
<p>Implement various DES example using the Hades Python package.</p>
<p>https://ki-oss.github.io/hades/</p>
<hr>
<p>Implement various DES examples using Python coroutines.</p>
<hr>
<p>Show a modelling example where it would be difficult to model in terms of sampling from the marginal distributions. Discuss the potential consequences for discrete event simulation.</p>
<hr>
<p>Discuss the usage of popularity as a measure of software quality.</p>
<p>AFAIK the only context where the popularity might be invoked is to make an argument that a given tool should be used because it is popular, or at least more popular than some alternative.</p>
<p>When you’re in some kind of mode of work where you have to make rapid decisions it makes sense to use heuristics. I don’t think that context usually applies for selecting software. Further, I don’t think that using popularity as a heuristic is all that reliable and it would make the world of software pretty awful if we all just looked to the most popular tool as the tool to use. That’s because the popularity itself would just be due to preferential attachement effects and not due to the quality of the software at all.</p>
<p>I will say that popular software has often gotten “something” right. Sometimes it is obvious what that is (e.g.&nbsp;Ruff’s static analysis is fast). Sometimes it isn’t obvious. Sometimes it isn’t the software itself but rather that it arrived on the scene early enough to have a big adoption advantage.</p>
<hr>
<p>Homomorphism between causal graphs and computation graphs on random variables.</p>
<hr>
<p>Go over the mathematical formalism of DES. I think it might be Zeigler that is a good reference for this. - Discrete event system specification - Timed-event system - Transition system</p>
<hr>
<p>Programmer have to practice building thing in order to learn how to build great things. But organizations often do not want you to build and rebuild the product multiple times to get it right. Iteratively rebuilding can be perceived as a source of unecessary cost. In there lays a trade off. If you don’t allow your programmers to iteratively rebuild systems then they will not get the experience to build that particular system in a great way. But if you allo your programmers to iteratively rebuild systems then it will take more time and cost more. Prototyping can offer some compromise, but I expect that overall there is a Pareto front.</p>
<p>Programmers can learn skills and concepts that transfer to future projects, which alleviates some of this problem.</p>
<p>The business should also understand that if they want to produce the various best thing of some type that it is going to require substantial cost, one way or another.</p>
<hr>
<p>Contrast event-based DES from process-based DES. This distinction is commonly made, but rarely defined. Providing an explanation of what these terms mean could be beneficial.</p>
<hr>
<p>Explore whether detailed balance in MCMC can be generalized.</p>
<hr>
<p>Write a Rust program which creates and occupies a SQL DB, and then queries from it.</p>
<hr>
<p>Write a Rust program which loads a CSV file.</p>
<hr>
<p>Write a Rust program which loads a yaml file.</p>
<hr>
<p>Run Mathematica in Quarto. Maybe use the Python Wolfram client package.</p>
<hr>
<p>Explain what performance ratcheting is.</p>
<p>In common parlance, performance ratcheting is when the expectations for an employee’s performance increase endlessly. This requires some mathematical terminology to make precise.</p>
<p>Suppose a cumulative increasing function is applied to the history of performance of the employee, which is used to define what is expected (but not necessarily the mathematical expection) of the employee’s performance.</p>
<p>Examples: - maximum - mean</p>
<p>It might be worth exploring what is better than this.</p>
<hr>
<p>Write the mathematics and PyMC code for an autoregressive model in which the time lags used follow a discrete probability distribution. That is, which time lags are used is random.</p>
<hr>
<p>Simulate random delayed differential equations with PyMC.</p>
<p>It might require integration with other packages. - ddeint - pydelay - jitcdde - scipy (there are some examples on stack overflow)</p>
<hr>
<p>Show an example of using ordinal regression to model count data.</p>
<p>The advantage of this approach is that it can take on a wide variety of shapes that classic count distributions cannot.</p>
<p>AFAIK, this would have the disadvantage of being bounded from above. This would mean choosing a finite number of bins. The largest bin would actually need to represent “X or greater”, which means the upper bin would not really act like a count. I wonder if Frank Harrel or some other statistician has found something nicer than this.</p>
<hr>
<p>Does using asynchronous programming make the locality of behaviour better or worse?</p>
<hr>
<p>Using the stack tracing tool in Python, implement a tool which collects the file and line number as a program executes. This can be visualized as a heatmap where the row of the heatmap is the computation step and the column indexes the files that are used. The entries are the row number of the file for the instruction being executed. From there we can define some metrics for how much we’re jumping around.</p>
<hr>
<p>Give an introduction to interval arithmetic.</p>
<hr>
<p>Give a worked example of using Samuelson’s inequality.</p>
<p>https://en.wikipedia.org/wiki/Samuelson%27s_inequality</p>
<hr>
<p>Give an example of Bayesian non-negative polyadic decomposition using PyMC.</p>
<p>Provide similar, but probabilistic, diagrams similar to those shown by Kolda: https://www.youtube.com/watch?v=L8uT6hgMt00</p>
<hr>
<p>Show an example of Bayesian discrete event simulation where the DES is occurring within the…</p>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/galenseilis\.github\.io\/blog\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>